; PlatformIO configuration for Nava sizzle Firmware
; Target: ATmega1284P @ 16MHz (TR-909 replica hardware)
; See PLATFORMIO_MIGRATION.md for project structure details

[env:nava_sysex]
platform = atmelavr
board = ATmega1284P
framework = arduino

; Hardware configuration
board_build.f_cpu = 16000000L
board_build.mcu = atmega1284p

; Compiler flags
build_flags =
    -DMIDI_HAS_SYSEX=1
    -DSYSEX_BUFFER_SIZE=2100
    -Wall
    -Wextra

; External library dependencies
lib_deps =
    arduino-libraries/LiquidCrystal@^1.0.7
    fortyseveneffects/MIDI Library@^5.0.2

; Local custom libraries (from jjjjj_firmware/src/)
; These will be in lib/ after migration:
;   - lib/SPI/          (Custom SPI implementation)
;   - lib/WireN/        (Custom I2C/Wire implementation)
;   - lib/MemoryFree/   (AVR memory diagnostics)

; Build hooks
extra_scripts = post:convert_to_sysex.py

; Upload configuration (adjust based on your programmer)
upload_protocol = usbasp
upload_flags =
    -Pusb
    -B5

; Serial monitor (for debugging)
monitor_speed = 31250
monitor_port = /dev/cu.usbserial*
monitor_filters = send_on_enter
